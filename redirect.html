<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            color: #333;
        }
        .loading-text {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="loading-text">
        –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –∏–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('‚úÖ Custom script (GitHub Redirect Page): DOMContentLoaded fired.');

        // --- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ URL –ù–ê –ê–î–†–ï–° –í–ê–®–ï–ô –ï–î–ò–ù–û–ô –°–¢–†–ê–ù–ò–¶–´ –ë–õ–ê–ì–û–î–ê–†–ù–û–°–¢–ò –í –¢–ò–õ–¨–î–ï ---
        const finalThankYouPageBaseUrl = 'https://gk38dev.tilda.ws/thx2'; 

        const deliveryAddress = localStorage.getItem('deliveryAddress');
        console.log('üì¶ Custom script (GitHub Redirect Page): –ê–¥—Ä–µ—Å –ò–ó localStorage:', deliveryAddress);

        localStorage.removeItem('deliveryAddress');
        console.log('üßπ Custom script (GitHub Redirect Page): –ê–¥—Ä–µ—Å —É–¥–∞–ª–µ–Ω –ò–ó localStorage (–µ—Å–ª–∏ –±—ã–ª).');

        let redirectUrl = finalThankYouPageBaseUrl;
        let statusParam = 'other'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é

        if (deliveryAddress) {
            const addressLower = deliveryAddress.toLowerCase();
            console.log('üì¶ Custom script (GitHub Redirect Page): –ê–¥—Ä–µ—Å –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ:', addressLower);
            const includesShelekhov = addressLower.includes('—à–µ–ª–µ—Ö–æ–≤');
            console.log('üì¶ Custom script (GitHub Redirect Page): –ê–¥—Ä–µ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç "—à–µ–ª–µ—Ö–æ–≤":', includesShelekhov);

            if (includesShelekhov) {
                statusParam = 'shelekhov';
                console.log('‚û°Ô∏è Custom script (GitHub Redirect Page): –û–ø—Ä–µ–¥–µ–ª–µ–Ω —Å—Ç–∞—Ç—É—Å "shelekhov".');
            } else {
                console.log('‚û°Ô∏è Custom script (GitHub Redirect Page): –û–ø—Ä–µ–¥–µ–ª–µ–Ω —Å—Ç–∞—Ç—É—Å "other".');
            }
        } else {
            console.warn('‚ö†Ô∏è Custom script (GitHub Redirect Page): –ê–¥—Ä–µ—Å –ù–ï –ù–ê–ô–î–ï–ù –≤ localStorage. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å "other" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.');
        }

        redirectUrl += '?status=' + statusParam;
        console.log('‚û°Ô∏è Custom script (GitHub Redirect Page): –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π URL –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:', redirectUrl);
        window.location.replace(redirectUrl);
    });
    </script>
</body>
</html>
